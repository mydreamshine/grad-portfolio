# 이번주 활동내역
## 클라우드 게임 스트리밍 개발타당성 조사

### 서버 / 클라이언트 간 역할 분장
#### 서버
  - 유저의 접속에 따라 해당 유저용 전용 클라이언트를 내부에서 구동
  - 지속적으로 유저에게 전용 클라이언트의 화면을 렌더링하여 전송

#### 클라이언트
  - 서버에서 전송한 데이터를 화면에 스트리밍
  - 유저 입력을 서버로 전송하는 터미널 역할

## SDK를 사용한 개발의 경우
  - Stardia
    - 파트너 회사에 한해서 언리얼을 연동 SDK 제공
    - 파트너 등록은 엄격하게 심사중
  - MS xCloud, PS NOW, G-cluster 등 다른 회사들은 SDK 공개를 하지않음

### 상용 SDK를 활용하는 것은 개발 불가 판정



## SDK 미지원으로 인한 Low-Level 개발시 요구사항
  - 게임 클라이언트에서의 음성, 영상 데이터 캡쳐
  - 데이터 스트림 인코딩 및 전송
  - 유저와의 인터렉션 구현

### 비디오 데이터 캡쳐
백버퍼에 렌더링 된 데이터를 CPU로 복사하여 스트림화
  - GPU -> CPU 간 Readback으로 인한 성능저하 예상

### 음성 데이터 캡쳐
현재 윈도우에서 사운드 플레이는 WASAPI를 이용 중
WASAPI는 데이터를 End-Point 버퍼에 복사하는 방식으로 사운드 장치에 음원을 전달함

#### 요구사항
프로그램 내부에 버퍼를 둔 소프트웨어적인 사운드 믹서의 구현이 요구됨
  - 서버에서 실행중인 클라이언트는 소리가 외부로 출력되서는 안됨
  - 클라이언트가 다수 실행되면 소리가 겹쳐서 나기 때문에 각 클라이언트마다 별도의 소리출력이 필요함

### 데이터 인코딩 및 전송
캡쳐된 데이터 스트림은 MS의 Media Foundation API를 통해 인코딩/다중화가 가능
Source Reader와 Sink Writer를 통해 인코딩/디코딩이 가능하다는 것을 문서상으로 확인

### 유저와의 인터렉션 구현
  - 클라이언트에서는 유저 입력만 서버로 전송

### 서버 하드웨어 스펙
  - 한대의 서버에서 다중클라이언트/서버가 구동되어야함
    - 여러 클라이언트를 렌더링해야하므로 GPU 과부하 및 리드백 과정 중 심한 오버헤드 예상 중
  - 스트리밍 방식이기에 대역폭이 부족함 ( Stardia 기준 1080p/60f 전송 시 10MB/s가 필요함)

  - 상용 서비스의 경우 이를 위해 nVidia의 GPU클라우드인 GPU Grid를 활용하는 것으로 보임

### Low-Level 단에서 작업하는 것은 
### 영상/음성 처리 및 다양한 분야의 기반지식이 필요하므로 개발 난항 예상


## 개발 방향성 조정
  - 디펜스 맵 밸런싱
  - PVP 밸런싱
  - AI
    - 파트너 AI
    - 군집 시뮬레이션 AI
    - 생태계 AI
    - 참고자료( https://blog.ncsoft.com/%ea%b2%8c%ec%9e%84%ea%b3%bc-ai-9-%ea%b2%8c%ec%9e%84-%ea%b0%9c%eb%b0%9c%ec%9d%98-%ed%9a%a8%ec%9c%a8%ec%9d%84-%eb%86%92%ec%97%ac%ec%a3%bc%eb%8a%94-%ec%9d%b4%eb%af%b8%ec%a7%80-%ec%83%9d%ec%84%b1/ )
  - 호스트 스트리밍( https://moonlight-stream.org/ )
